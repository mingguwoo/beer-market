<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nio.ngfs.plm.bom.configuration.infrastructure.repository.mapper.BomsOxoOptionPackageMapper">

    <insert id="insertOxoOptionPackages"
            parameterType="com.nio.ngfs.plm.bom.configuration.infrastructure.repository.entity.BomsOxoOptionPackageEntity">
        INSERT INTO boms_oxo_option_package (
        feature_option_id,
        base_vehicle_id,
        package_code,
        description,
        brand,
        create_user,
        update_user
        )
        VALUES
        <foreach collection="oxoOptionPackages" item="entity" index="index" separator=",">
            (#{entity.featureOptionId},#{entity.baseVehicleId},#{entity.packageCode},#{entity.description}
            ,#{entity.brand},#{entity.createUser}
            ,#{entity.updateUser})
        </foreach>
        ON DUPLICATE KEY UPDATE
        <trim prefix="" suffixOverrides=",">
            <foreach collection="oxoOptionPackages" item="entity" separator=",">
                del_flag=0,
                <if test="entity.description!=null">
                    description=VALUES(description),
                </if>
                <if test="entity.packageCode!=null">
                    package_code=VALUES(package_code),
                </if>
                update_user=VALUES(update_user)
            </foreach>
        </trim>
    </insert>

</mapper>
