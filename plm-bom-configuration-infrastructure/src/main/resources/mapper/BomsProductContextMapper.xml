<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nio.ngfs.plm.bom.configuration.infrastructure.repository.mapper.BomsProductContextMapper">

    <insert id="addOrUpdateBatch"
        parameterType="java.util.List">
        insert INTO boms_product_context (
        model_code,
        model_year,
        option_code,
        feature_code,
        create_user,
        update_user
        )
        VALUES
        <foreach collection="entityList" item = "entity" index = "index" separator=",">
            (#{entity.modelCode},#{entity.modelYear},#{entity.optionCode},#{entity.featureCode},#{entity.createUser},#{entity.updateUser})
        </foreach>
        ON DUPLICATE KEY UPDATE
        <trim prefix="" suffixOverrides=",">
            <foreach collection="entityList" item = "entity" separator=",">
                    del_flag = 0,
                    update_user = #{entity.updateUser}
            </foreach>
        </trim>
    </insert>
</mapper>